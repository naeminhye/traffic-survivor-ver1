<!DOCTYPE html>
<html lang="en">

<head>
    <title>Cài đặt</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel=stylesheet href="core/libs/jquery-ui/jquery-ui.min.css" />
    <link rel="stylesheet" href="core/libs/font-awesome/font-awesome.min.css">
    <link rel="stylesheet" href="core/libs/animate/animate.min.css">
    <link rel="stylesheet" href="core/libs/toastr.js/toastr.min.css">
    <link rel="stylesheet" href="core/libs/nes_css/nes.min.css">
    <link rel="stylesheet" href="core/styles/info.css">
    <link rel="stylesheet" href="core/styles/style.css">
</head>

<body>

    <div class="content-container">
        <div id="options" style="position: relative; width: 40vw;">
            <div class="note-board" style="width: 100%; height: 50vh; overflow-y: auto;">
                <div class="wrapper">
                    <input id="webvrMode" name="webvr-mode" type="checkbox" value="webvr-mode">
                    <label for="webvrMode">Sử dụng WebVR</label>
                </div>
                <div class="wrapper">
                    <input id="enableCameraChange" name="camera-mode" type="checkbox" value="camera-mode">
                    <label for="enableCameraChange">Cho phép thay đổi góc nhìn của Camera</label>
                </div>
            </div>
            <button class="clip menu-button" id="option-save">Lưu</button>
            <button class="clip menu-button" onclick="javascript:history.back()">Trở về</button>
        </div>
    </div>

    <% include ../partials/libs %>
    <script>
        var gameOptions = localStorage.getObject("gameOptions") ? localStorage.getObject("gameOptions") : [];
        $(document).ready(function() {
            let mode = false, cameraMode = false;
            if( gameOptions.hasOwnProperty("webvrMode") && gameOptions["webvrMode"] ) {
                mode = true;
            }
            $("#webvrMode").prop('checked', mode);
            if( gameOptions.hasOwnProperty("enableCameraChange") && gameOptions["enableCameraChange"] ) {
                cameraMode = true;
            }
            $("#enableCameraChange").prop('checked', cameraMode);
        });

        $("#option-save").click(function() {
            let mode = $("#webvrMode").prop('checked');
            if(gameOptions.hasOwnProperty("webvrMode")) {
                gameOptions["webvrMode"] = mode;
            }
            else {
                gameOptions = Object.assign({ webvrMode: mode }, gameOptions);
            }
            
            let cameraMode = $("#enableCameraChange").prop('checked');
            if(gameOptions.hasOwnProperty("enableCameraChange")) {
                gameOptions["enableCameraChange"] = cameraMode;
            }
            else {
                gameOptions = Object.assign({ enableCameraChange: cameraMode }, gameOptions);
            }
            localStorage.setObject("gameOptions", gameOptions);
        });
    </script>
</body>

</html>
